<!-- Spinner -->
<div *ngIf="loading" class="text-center my-4">
  <div class="spinner-border" role="status"></div>
</div>

<!-- Error -->
<div *ngIf="uiMessage && !loading" class="alert alert-danger">
  {{ uiMessage }}
</div>

<!-- Balance -->
<div *ngIf="balance" class="card my-3 shadow-sm text-white" style="background: linear-gradient(135deg, #1c1f2c, #2e3446); border-radius: 15px;">
  <div class="card-body">
    <h5 class="card-title mb-0">Balance de la cuenta</h5>
    <p class="fs-4 mb-1">{{ balance.equity | currency:'USD' }}</p>
    <small>Efectivo disponible: {{ balance.cash | currency:'USD' }}</small>
  </div>
</div>

<!-- Activos disponibles -->
<h4 class="mt-4 text-white">Activos disponibles</h4>

<div class="row mt-3">
  <div class="col-md-6 col-lg-4 mb-4" *ngFor="let a of assets">
    <div class="card h-100 shadow-sm text-white" style="background: linear-gradient(135deg, #1c1f2c, #2e3446); border-radius: 15px;">
      <div class="card-body">
        <h5 class="card-title">{{ a.symbol }}</h5>
        <p class="card-text mb-2">
          {{ a.name }}<br />
          <small class="text-muted">{{ a.exchange }}</small>
        </p>

        <!-- GrÃ¡fico embebido (TradingView) -->
        <iframe
          [src]="getChartUrl(a.symbol)"
          width="100%"
          height="200"
          frameborder="0"
          allowtransparency="true"
          scrolling="no"
          style="border: none;">
        </iframe>

         <!-- Botones de acciÃ³n -->
        <div class="d-flex justify-content-between mt-3">
         <button class="btn btn-sm btn-success mt-3 w-100" (click)="abrirModalCompra(a.symbol)">
  ðŸ›’ Comprar
</button>
        </div>

      </div>
    </div>
  </div>
</div>
<app-modal-compra
  [symbol]="symbolSeleccionado"
  (confirmar)="onConfirmarCompra($event)">
</app-modal-compra>
